<!DOCTYPE html>
<html lang="en" slick-uniqueid="3">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <link rel="shortcut icon" href="https://1132874023.rsc.cdn77.org/img/favicon.ico">
    <title>Weelco - Test - HLS</title>

    <link rel="stylesheet" href="https://1163863275.rsc.cdn77.org/css/video-js.css">
    <link rel="stylesheet" href="https://1877047278.rsc.cdn77.org/css/videojs-panorama.min.css">

    <script src="https://1132874023.rsc.cdn77.org/js/jquery.min.js"></script>
    <script src="https://1132874023.rsc.cdn77.org/js/video.js"></script>
    <script src="https://1877047278.rsc.cdn77.org/js/videojs-contrib-hls.min.js"></script>
    <script src="https://1132874023.rsc.cdn77.org/js/three.js"></script>
    <script src="https://1132874023.rsc.cdn77.org/js/videojs-panorama.v5.min.js"></script>
</head>
<body>
    

<div>
    <form action="" method="GET">
        <input type="text" name="url" value="" placeholder="m3u8 URL">
        <input type="submit" value="Load">
    </form>

    <p>
    <video id="videojs-panorama-player" class="video-js vjs-default-skin" crossorigin="anonymous" controls width="600" height="300">
        <source src="" type="application/x-mpegURL">
    </video>
</p>

	<script type="text/javascript">
    function getQueryParams(qs) {
        qs = qs.split('+').join(' ');

        var params = {},
            tokens,
            re = /[?&]?([^=]+)=([^&]*)/g;

        while (tokens = re.exec(qs)) {
            params[decodeURIComponent(tokens[1])] = decodeURIComponent(tokens[2]);
        }

        return params;
    }

    var url   = '';
    var query = getQueryParams(document.location.search);
    if (typeof query.url != 'undefined') {
        url = query.url;
    }
    $('#videojs-panorama-player source').attr('src', url);

    var player = window.player = videojs('videojs-panorama-player', {}, function () {
        window.addEventListener("resize", function () {
            var canvas = player.getChild('Canvas');
            if(canvas) canvas.handleResize();
        });
    });
    var videoElement = document.getElementById("videojs-panorama-player");
    var width = videoElement.offsetWidth;
    var height = videoElement.offsetHeight;
    player.width(width), player.height(height);
    player.panorama({
        clickAndDrag: true,
        autoMobileOrientation: true,
        initFov: 100,
        callback: function () {
            player.play();
        }
    });
	</script>
</div>


</body>
</html>